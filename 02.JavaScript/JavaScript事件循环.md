- 进程与线程
  - 进程
    - 进程是一个执行中的程序实例，它是系统资源的一个分配单元
    - 每个进程都有自己的内存空间，不会被其它进程所干扰
    - 一个进程可以包含一个或多个线程
  - 线程
    - 线程是进程内部的一个执行单元
    - 一个进程内部，可以并发执行多个线程，它们都有自己的寄存器和栈，但可以共享同一进程的代码段、数据段和其它进程中的资源
- 浏览器执行线程
  - 浏览器是多进程的，不同的浏览器可能使用不同的多进程架构
  - 浏览器渲染进程
    - 浏览器渲染进程属于浏览器多进程中的一种，主要负责页面渲染，脚本执行，事件处理等
    - 其包含的主要线程有：
      - `GUI` 渲染线程
      - `JacaScript` 引擎线程 
      - 事件触发线程
      - 定时器触发线程
      - `http` 请求线程

- `JavaScript` 代码的执行是在一个单独的线程中执行的，因此 `JavaScript` 代码执行时，同一时刻只能做一件事
- 宏任务和微任务
  - 宏任务（`macrotask`）
    - 宏任务是由 `JavaScript` 的宿主环境（浏览器或 `Node.js`）排定的任务
    - 以下都是宏任务：
      - 网络请求
      - `setTimeout` 和 `setInterval`
      - `DOM` 事件监听
      - `I/O` 操作
      - `UI` 渲染
  - 微任务（`microtask`）
    - 微任务是在 `JavaScript` 自身的执行环境中排定的任务
    - 以下都是微任务：
      - `Promise` 的 `then` 和 `catch` 的回调函数
      - `MutationObserver` 的回调函数
  - 微任务的优先级高于宏任务
    - 这样可以确保微任务之间的应用程序环境基本相同（比如没有新的网络数据，没有 `DOM` 更改等）
    - 如果想要异步执行一个函数，但是想要再更改渲染或新事件被处理之前执行
      - 那么可以将该函数传入 `queueMicrotask` 函数执行来开启微任务（并未纳入 `ES` 规范，较老的浏览器可能不支持）
      - 也可以使用 `Promise.resolve().then(callback)` 来实现
- 事件循环（`Event Loop`）
  - 事件循环是单线程的 `JavaScript` 在处理异步事件时进行的一种循环过程
  - 事件循环的流程
    1. 顶层代码进入执行栈（也称调用栈，是一个先进后出的数据结构，代码不是一行一行入栈，而是一个一个执行上下文入栈）
    2. 执行执行栈中的代码
       - 如果遇到要开启宏任务的情况，则将这个宏任务交给宿主环境处理，继续执行执行栈中的代码，宿主环境会在处理完宏任务后，将其处理结果放入宏任务队列中
       - 如果遇到要开启微任务的情况，则会立即将微任务放入微任务队列中
    3. 执行栈中所有代码执行完毕后，检查微任务队列中是否存在微任务
       - 如果存在则将它们一个一个取出并放入执行栈执行，直到微任务队列为空，之后重复第三步，开始检查宏任务
       - 如果不存在任何微任务，则检查宏任务队列中是否存在宏任务，如果存在则取出一个将其执行，之后重复第三步，继续检查微任务